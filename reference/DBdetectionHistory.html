<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Database to detion histories — DBdetectionHistory • weda</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Database to detion histories — DBdetectionHistory"><meta name="description" content="Database to detion histories"><meta property="og:description" content="Database to detion histories"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">weda</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/camtrap-upload.html">Uploading camera trap records to database</a></li>
    <li><a class="dropdown-item" href="../articles/data-download.html">Using and downloading data</a></li>
    <li><a class="dropdown-item" href="../articles/database-connect.html">Connecting to the database</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JustinCally/weda/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Database to detion histories</h1>
      <small class="dont-index">Source: <a href="https://github.com/JustinCally/weda/blob/main/R/detectionHistories.R" class="external-link"><code>R/detectionHistories.R</code></a></small>
      <div class="d-none name"><code>DBdetectionHistory.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Database to detion histories</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">DBdetectionHistory</span><span class="op">(</span></span>
<span>  <span class="va">con</span>,</span>
<span>  <span class="va">ProjectShortName</span>,</span>
<span>  <span class="va">Species</span>,</span>
<span>  Iteration <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">byCamera</span>,</span>
<span>  occasionStartTime <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  camerasIndependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"binary"</span>,</span>
<span>  occasionLength <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  includeEffort <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  day1 <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-con">con<a class="anchor" aria-label="anchor" href="#arg-con"></a></dt>
<dd><p>database connection string (as returned via weda_connect())</p></dd>


<dt id="arg-projectshortname">ProjectShortName<a class="anchor" aria-label="anchor" href="#arg-projectshortname"></a></dt>
<dd><p>Project short name (single value/project must be provided)</p></dd>


<dt id="arg-species">Species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Common species name/s to obtain detection histories for (e.g. Leadbeater's Possum)</p></dd>


<dt id="arg-iteration">Iteration<a class="anchor" aria-label="anchor" href="#arg-iteration"></a></dt>
<dd><p>Iteration of survey (only single value allowed, loop function if multiple iterations required)</p></dd>


<dt id="arg-bycamera">byCamera<a class="anchor" aria-label="anchor" href="#arg-bycamera"></a></dt>
<dd><p>passed to camtrapR: logical. If TRUE, camera operability matrix is computed by camera, not by station (requires cameraCol)</p></dd>


<dt id="arg-occasionstarttime">occasionStartTime<a class="anchor" aria-label="anchor" href="#arg-occasionstarttime"></a></dt>
<dd><p>passed to camtrapR: integer. time of day (the full hour) at which to begin occasions. Replaces occasionStartTime
from detectionHistory and spatialDetectionHistory.</p></dd>


<dt id="arg-camerasindependent">camerasIndependent<a class="anchor" aria-label="anchor" href="#arg-camerasindependent"></a></dt>
<dd><p>passed to camtrapR: logical. Return number of active camera traps by station? Only if byCamera
is FALSE and allCamsOn is FALSE. If camerasIndependent is TRUE, output values will be the number of operational cameras
at a station. If camerasIndependent is FALSE, the value is 1 if at least 1 camera was operational, otherwise 0. In both cases,
values are NA if no camera was set up.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>passed to camtrapR: character. Return binary detections ("binary") or counts of detections ("count")</p></dd>


<dt id="arg-occasionlength">occasionLength<a class="anchor" aria-label="anchor" href="#arg-occasionlength"></a></dt>
<dd><p>passed to camtrapR:     integer. occasion length in days</p></dd>


<dt id="arg-includeeffort">includeEffort<a class="anchor" aria-label="anchor" href="#arg-includeeffort"></a></dt>
<dd><p>passed to camtrapR: logical. Compute trapping effort (number of active camera trap days per station and occasion)?</p></dd>


<dt id="arg-day-">day1<a class="anchor" aria-label="anchor" href="#arg-day-"></a></dt>
<dd><p>passed to camtrapR: character. When should occasions begin: station setup date ("station"), first day of survey ("survey"), a specific date (e.g. "2015-12-31")?</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed to <code><a href="https://jniedballa.github.io/camtrapR/reference/detectionHistory.html" class="external-link">camtrapR::detectionHistory()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Depending on the value of <code>includeEffort</code> and
<code>scaleEffort</code>, a list with either 1, 2 or 3 elements. The first element
is the species detection history. The second is the optional effort matrix
and the third contains the effort scaling parameters.</p>
<dl><dt>detection_history</dt>
<dd><p>A species detection matrix</p></dd>
 <dt>effort</dt>
<dd><p>A matrix
giving the number of active camera trap days per station and occasion (=
camera trapping effort). It is only returned if <code>includeEffort = TRUE</code></p></dd>

<dt>effort_scaling_parameters</dt>
<dd><p>Scaling parameters of the effort matrix. It
is only returned if <code>includeEffort</code> and <code>scaleEffort</code> are
<code>TRUE</code></p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">weda</span><span class="fu">::</span><span class="fu"><a href="weda_connect.html">weda_connect</a></span><span class="op">(</span>password <span class="op">=</span> <span class="fu">keyring</span><span class="fu">::</span><span class="fu">key_get</span><span class="op">(</span>service <span class="op">=</span> <span class="st">"ari-dev-weda-psql-01"</span>,</span></span>
<span class="r-in"><span>                                                     username <span class="op">=</span> <span class="st">"psql_user"</span><span class="op">)</span>, username <span class="op">=</span> <span class="st">"psql_user"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lbp_det_hist</span> <span class="op">&lt;-</span> <span class="fu">DBdetectionHistory</span><span class="op">(</span><span class="va">con</span>,</span></span>
<span class="r-in"><span>                                  ProjectShortName <span class="op">=</span> <span class="st">"FPSP_LBPCT"</span>,</span></span>
<span class="r-in"><span>                                  Species <span class="op">=</span> <span class="st">"Leadbeater's Possum"</span>,</span></span>
<span class="r-in"><span>                                  Iteration <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                  byCamera <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                  occasionStartTime <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                                  camerasIndependent <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                  output <span class="op">=</span> <span class="st">"binary"</span>,</span></span>
<span class="r-in"><span>                                  occasionLength <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                  includeEffort <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                  scaleEffort <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                  day1 <span class="op">=</span> <span class="st">"station"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                                  <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Justin Cally.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

